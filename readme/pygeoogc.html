
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<meta property="og:title" content="PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://hyriver.readthedocs.io/en/readme/pygeoogc.html" />
  
<meta property="og:description" content="PyPi Conda Version CodeCov Python Versions Downloads, Security Status CodeFactor black pre-commit Binder, Features: PyGeoOGC is a part of HyRiver software stack that is designed to aid in hydroclim..." />
  
<meta property="og:image" content="https://raw.githubusercontent.com/cheginit/HyRiver/main/docs/source/_static/hydriver_logo.png" />
  
<meta property="og:image:alt" content="PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services" />
  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@_taher_" />
<meta name="twitter:creator" content="@_taher_" />
<meta name="twitter:description" content="HyRiver is a suite of Python packages that provides a unified API for retrieving geospatial/temporal data from various web services." />
<meta name="twitter:image" content="https://raw.githubusercontent.com/cheginit/HyRiver/main/docs/source/_static/hydriver_logo.png" />
<meta name="twitter:image:alt" content="HyRiver is a suite of Python packages that provides a unified API for retrieving geospatial/temporal data from various web services." />
    <title>PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PyGeoUtils: Utilities for (Geo)JSON and (Geo)TIFF Conversion" href="pygeoutils.html" />
    <link rel="prev" title="AsyncRetriever: Asynchronous requests with persistent caching" href="async_retriever.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/hyriver_logo_text.svg" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Hydroclimate Data Retriever
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../readmes.html">
   Software Stack
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="pynhd.html">
     PyNHD: Navigate and subset NHDPlus database
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pygeohydro.html">
     PyGeoHydro: Retrieve Geospatial Hydrology Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="py3dep.html">
     Py3DEP: Topographic data through 3DEP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pydaymet.html">
     PyDaymet: Daily climate data through Daymet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="async_retriever.html">
     AsyncRetriever: Asynchronous requests with persistent caching
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pygeoutils.html">
     PyGeoUtils: Utilities for (Geo)JSON and (Geo)TIFF Conversion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../examples.html">
   Example Gallery
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/3dep.html">
     Topographic Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/aridity.html">
     Aridity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/columbia.html">
     Dams in Columbia River Network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/cross_section.html">
     River Elevation and Cross-Section
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/dam_impact.html">
     Working with Geospatial Hydrologic Data Using Web Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/daymet.html">
     Climate Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/geoconnex.html">
     GeoConnex
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/hymod_calibration.html">
     Hydrological Modeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/ndvi.html">
     NDVI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nhdplus.html">
     River Network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nid.html">
     National Inventory of Dams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nid_dib.html">
     Spatiotemporal Distribution of Dams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nlcd.html">
     Land Use/Land Cover
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/noaa.html">
     Water Levels and Tides
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nwis.html">
     River Discharge
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/pet_validation.html">
     Computing PET
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/pygeoapi.html">
     Split Catchment with PyGeoAPI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/rem.html">
     Relative Elevation Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/ssebop.html">
     Actual Evapotranspiration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/us_coasts.html">
     CONUS Coasts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/water_quality.html">
     Water Quality Portal
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/webservices.html">
     Web Services Queries
    </a>
   </li>
  </ul>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../autoapi/index.html">
   API References
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pynhd/index.html">
     PyNHD
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/core/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.core
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/network_tools/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.network_tools
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/nhdplus_derived/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.nhdplus_derived
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/pynhd/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.pynhd
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pygeohydro/index.html">
     PyGeoHydro
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/helpers/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.helpers
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/plot/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.plot
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/pygeohydro/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.pygeohydro
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/us_abbrs/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.us_abbrs
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/waterdata/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.waterdata
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/py3dep/index.html">
     Py3DEP
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/py3dep/py3dep/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         py3dep.py3dep
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/py3dep/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         py3dep.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pydaymet/index.html">
     PyDaymet
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pydaymet/core/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pydaymet.core
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pydaymet/pet/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pydaymet.pet
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pydaymet/pydaymet/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pydaymet.pydaymet
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/async_retriever/index.html">
     AsyncRetriever
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/async_retriever/async_retriever/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         async_retriever.async_retriever
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/async_retriever/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         async_retriever.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pygeoogc/index.html">
     PyGeoOGC
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoogc/core/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoogc.core
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoogc/pygeoogc/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoogc.pygeoogc
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoogc/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoogc.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pygeoutils/index.html">
     PyGeoUtils
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoutils/pygeoutils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoutils.pygeoutils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../history.html">
   Changelogs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pynhd.html">
     PyNHD
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pygeohydro.html">
     PyGeoHydro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/py3dep.html">
     Py3DEP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pydaymet.html">
     PyDaymet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/async_retriever.html">
     AsyncRetriever
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pygeoogc.html">
     PyGeoOGC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pygeoutils.html">
     PyGeoUtils
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../authors.html">
   Credits
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../license.html">
   License
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/cheginit/HyRiver"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cheginit/HyRiver/issues/new?title=Issue%20on%20page%20%2Freadme/pygeoogc.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cheginit/HyRiver/edit/main/docs/readme/pygeoogc.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#citation">
   Citation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-start">
   Quick start
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#citation">
   Citation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-start">
   Quick start
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="pygeoogc-retrieve-data-from-restful-wms-and-wfs-services">
<h1>PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services<a class="headerlink" href="#pygeoogc-retrieve-data-from-restful-wms-and-wfs-services" title="Permalink to this headline">#</a></h1>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/pygeoogc"><img alt="PyPi" src="https://img.shields.io/pypi/v/pygeoogc.svg" /></a>
<a class="reference external image-reference" href="https://anaconda.org/conda-forge/pygeoogc"><img alt="Conda Version" src="https://img.shields.io/conda/vn/conda-forge/pygeoogc.svg" /></a>
<a class="reference external image-reference" href="https://codecov.io/gh/hyriver/pygeoogc"><img alt="CodeCov" src="https://codecov.io/gh/hyriver/pygeoogc/branch/main/graph/badge.svg" /></a>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/pygeoogc"><img alt="Python Versions" src="https://img.shields.io/pypi/pyversions/pygeoogc.svg" /></a>
<a class="reference external image-reference" href="https://pepy.tech/project/pygeoogc"><img alt="Downloads" src="https://pepy.tech/badge/pygeoogc" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference external image-reference" href="https://github.com/PyCQA/bandit"><img alt="Security Status" src="https://img.shields.io/badge/security-bandit-green.svg" /></a>
<a class="reference external image-reference" href="https://www.codefactor.io/repository/github/hyriver/pygeoogc"><img alt="CodeFactor" src="https://www.codefactor.io/repository/github/hyriver/pygeoogc/badge" /></a>
<a class="reference external image-reference" href="https://github.com/psf/black"><img alt="black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
<a class="reference external image-reference" href="https://github.com/pre-commit/pre-commit"><img alt="pre-commit" src="https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&amp;logoColor=white" /></a>
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/hyriver/HyRiver-examples/main?urlpath=lab/tree/notebooks"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline">#</a></h1>
<p>PyGeoOGC is a part of <a class="reference external" href="https://github.com/hyriver/HyRiver">HyRiver</a> software stack that
is designed to aid in hydroclimate analysis through web services. This package provides
general interfaces to web services that are based on
<a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">ArcGIS RESTful</a>,
<a class="reference external" href="https://en.wikipedia.org/wiki/Web_Map_Service">WMS</a>, and
<a class="reference external" href="https://en.wikipedia.org/wiki/Web_Feature_Service">WFS</a>. Although
all these web services have limits on the number of features per request (e.g., 1000
object IDs for a RESTful request or 8 million pixels for a WMS request), PyGeoOGC, first, divides
the large requests into smaller chunks, and then returns the merged results.</p>
<p>Moreover, under the hood, PyGeoOGC uses
<a class="reference external" href="https://github.com/hyriver/async_retriever">AsyncRetriever</a>
for making requests asynchronously with persistent caching. This improves the
reliability and speed of data retrieval significantly. AsyncRetriever caches all request/response
pairs and upon making an already cached request, it will retrieve the responses from the cache
if the server’s response is unchanged.</p>
<p>You can control the request/response caching behavior by setting the following
environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HYRIVER_CACHE_NAME</span></code>: Path to the caching SQLite database. It defaults to
<code class="docutils literal notranslate"><span class="pre">./cache/aiohttp_cache.sqlite</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HYRIVER_CACHE_EXPIRE</span></code>: Expiration time for cached requests in seconds. It defaults to
-1 (never expire).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HYRIVER_CACHE_DISABLE</span></code>: Disable reading/writing from/to the cache. The default is false.</p></li>
</ul>
<p>For example, in your code before making any requests you can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HYRIVER_CACHE_NAME&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;path/to/file.sqlite&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HYRIVER_CACHE_EXPIRE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;3600&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HYRIVER_CACHE_DISABLE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
</pre></div>
</div>
<p>There is also an inventory of URLs for some of these web services in form of a class called
<code class="docutils literal notranslate"><span class="pre">ServiceURL</span></code>. These URLs are in four categories: <code class="docutils literal notranslate"><span class="pre">ServiceURL().restful</span></code>,
<code class="docutils literal notranslate"><span class="pre">ServiceURL().wms</span></code>, <code class="docutils literal notranslate"><span class="pre">ServiceURL().wfs</span></code>, and <code class="docutils literal notranslate"><span class="pre">ServiceURL().http</span></code>. These URLs provide you
with some examples of the services that PyGeoOGC supports. If you have success using PyGeoOGC with a web
service please consider submitting a request to be added to this URL inventory. You can get all
the URLs in the <code class="docutils literal notranslate"><span class="pre">ServiceURL</span></code> class by just printing it <code class="docutils literal notranslate"><span class="pre">print(ServiceURL())</span></code>.</p>
<p>PyGeoOGC has three main classes:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ArcGISRESTful</span></code>: This class can be instantiated by providing the target layer URL.
For example, for getting Watershed Boundary Data we can use <code class="docutils literal notranslate"><span class="pre">ServiceURL().restful.wbd</span></code>.
By looking at the web service’s
<a class="reference external" href="https://hydro.nationalmap.gov/arcgis/rest/services/wbd/MapServer">website</a>
we see that there are nine layers. For example, 1 for 2-digit HU (Region), 6 for 12-digit HU
(Subregion), and so on. We can pass the URL to the target layer directly, like this
<code class="docutils literal notranslate"><span class="pre">f&quot;{ServiceURL().restful.wbd}/6&quot;</span></code> or as a separate argument via <code class="docutils literal notranslate"><span class="pre">layer</span></code>.</p>
<p>Afterward, we request for the data in two steps. First, we need to get
the target object IDs using <code class="docutils literal notranslate"><span class="pre">oids_bygeom</span></code> (within a geometry), <code class="docutils literal notranslate"><span class="pre">oids_byfield</span></code> (specific
field IDs), or <code class="docutils literal notranslate"><span class="pre">oids_bysql</span></code> (any valid SQL 92 WHERE clause) class methods. Then, we can get
the target features using <code class="docutils literal notranslate"><span class="pre">get_features</span></code> class method. The returned response can be converted
into a GeoDataFrame using <code class="docutils literal notranslate"><span class="pre">json2geodf</span></code> function from
<a class="reference external" href="https://github.com/hyriver/pygeoutils">PyGeoUtils</a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">WMS</span></code>: Instantiation of this class requires at least 3 arguments: service URL, layer
name(s), and output format. Additionally, target CRS and the web service version can be provided.
Upon instantiation, we can use <code class="docutils literal notranslate"><span class="pre">getmap_bybox</span></code> method class to get the target raster data
within a bounding box. The box can be in any valid CRS and if it is different from the default
CRS, <code class="docutils literal notranslate"><span class="pre">EPSG:4326</span></code>, it should be passed using <code class="docutils literal notranslate"><span class="pre">box_crs</span></code> argument. The service response can be
converted into a <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> using <code class="docutils literal notranslate"><span class="pre">gtiff2xarray</span></code> function from PyGeoUtils.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WFS</span></code>: Instantiation of this class is similar to <code class="docutils literal notranslate"><span class="pre">WMS</span></code>. The only difference is that
only one layer name can be passed. Upon instantiation there are three ways to get the data:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getfeature_bybox</span></code>: Get all the target features within a bounding box in any valid CRS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getfeature_byid</span></code>: Get all the target features based on the IDs. Note that two arguments
should be provided: <code class="docutils literal notranslate"><span class="pre">featurename</span></code>, and <code class="docutils literal notranslate"><span class="pre">featureids</span></code>. You can get a list of valid feature
names using <code class="docutils literal notranslate"><span class="pre">get_validnames</span></code> class method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getfeature_byfilter</span></code>: Get the data based on any valid
<a class="reference external" href="https://docs.geoserver.org/latest/en/user/tutorials/cql/cql_tutorial.html">CQL</a> filter.</p></li>
</ul>
<p>You can convert the returned response of this function to a <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> using <code class="docutils literal notranslate"><span class="pre">json2geodf</span></code>
function from PyGeoUtils package.</p>
</li>
</ul>
<p>You can find some example notebooks <a class="reference external" href="https://github.com/hyriver/HyRiver-examples">here</a>.</p>
<p>Furthermore, you can also try using PyGeoOGC without installing
it on your system by clicking on the binder badge. A Jupyter Lab
instance with the HyRiver stack pre-installed will be launched in your web browser, and you
can start coding!</p>
<p>Please note that since this project is in early development stages, while the provided
functionalities should be stable, changes in APIs are possible in new releases. But we
appreciate it if you give this project a try and provide feedback. Contributions are most welcome.</p>
<p>Moreover, requests for additional functionalities can be submitted via
<a class="reference external" href="https://github.com/hyriver/pygeoogc/issues">issue tracker</a>.</p>
</section>
<section id="citation">
<h1>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">#</a></h1>
<p>If you use any of HyRiver packages in your research, we appreciate citations:</p>
<div class="highlight-bibtex notranslate"><div class="highlight"><pre><span></span><span class="nc">@article</span><span class="p">{</span><span class="nl">Chegini_2021</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Chegini, Taher and Li, Hong-Yi and Leung, L. Ruby}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.21105/joss.03175}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">journal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Journal of Open Source Software}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">month</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{66}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{1--3}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{{HyRiver: Hydroclimate Data Retriever}}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">volume</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{6}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2021}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h1>
<p>You can install PyGeoOGC using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install pygeoogc
</pre></div>
</div>
<p>Alternatively, PyGeoOGC can be installed from the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> repository
using <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a>
or <a class="reference external" href="https://github.com/conda-forge/miniforge">Mamba</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda install -c conda-forge pygeoogc
</pre></div>
</div>
</section>
<section id="quick-start">
<h1>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">#</a></h1>
<p>We can access
<a class="reference external" href="https://edits.nationalmap.gov/arcgis/rest/services/NHDPlus_HR/NHDPlus_HR/MapServer">NHDPlus HR</a>
via RESTful service,
<a class="reference external" href="https://www.fws.gov/wetlands/">National Wetlands Inventory</a> from WMS, and
<a class="reference external" href="https://www.fema.gov/national-flood-hazard-layer-nfhl">FEMA National Flood Hazard</a>
via WFS. The output for these functions are of type <code class="docutils literal notranslate"><span class="pre">requests.Response</span></code> that
can be converted to <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> or <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> using
<a class="reference external" href="https://github.com/hyriver/pygeoutils">PyGeoUtils</a>.</p>
<p>Let’s start the National Map’s NHDPlus HR web service. We can query the flowlines that are
within a geometry as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pygeoogc</span> <span class="kn">import</span> <span class="n">ArcGISRESTful</span><span class="p">,</span> <span class="n">WFS</span><span class="p">,</span> <span class="n">WMS</span><span class="p">,</span> <span class="n">ServiceURL</span>
<span class="kn">import</span> <span class="nn">pygeoutils</span> <span class="k">as</span> <span class="nn">geoutils</span>
<span class="kn">from</span> <span class="nn">pynhd</span> <span class="kn">import</span> <span class="n">NLDI</span>

<span class="n">basin_geom</span> <span class="o">=</span> <span class="n">NLDI</span><span class="p">()</span><span class="o">.</span><span class="n">get_basins</span><span class="p">(</span><span class="s2">&quot;01031500&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">hr</span> <span class="o">=</span> <span class="n">ArcGISRESTful</span><span class="p">(</span><span class="n">ServiceURL</span><span class="p">()</span><span class="o">.</span><span class="n">restful</span><span class="o">.</span><span class="n">nhdplushr</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">outformat</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">get_features</span><span class="p">(</span><span class="n">hr</span><span class="o">.</span><span class="n">oids_bygeom</span><span class="p">(</span><span class="n">basin_geom</span><span class="p">,</span> <span class="s2">&quot;epsg:4326&quot;</span><span class="p">))</span>
<span class="n">flowlines</span> <span class="o">=</span> <span class="n">geoutils</span><span class="o">.</span><span class="n">json2geodf</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</pre></div>
</div>
<p>Note <code class="docutils literal notranslate"><span class="pre">oids_bygeom</span></code> has three additional arguments: <code class="docutils literal notranslate"><span class="pre">sql_clause</span></code>, <code class="docutils literal notranslate"><span class="pre">spatial_relation</span></code>,
and <code class="docutils literal notranslate"><span class="pre">distance</span></code>. We can use <code class="docutils literal notranslate"><span class="pre">sql_clause</span></code> for passing any valid SQL WHERE clauses and
<code class="docutils literal notranslate"><span class="pre">spatial_relation</span></code> for specifying the target predicate such as
intersect, contain, cross, etc. The default predicate is intersect
(<code class="docutils literal notranslate"><span class="pre">esriSpatialRelIntersects</span></code>). Additionally, we can use <code class="docutils literal notranslate"><span class="pre">distance</span></code> for specifying the buffer
distance from the input geometry for getting features.</p>
<p>We can also submit a query based on IDs of any valid field in the database. If the measure
property is desired you can pass <code class="docutils literal notranslate"><span class="pre">return_m</span></code> as <code class="docutils literal notranslate"><span class="pre">True</span></code> to the <code class="docutils literal notranslate"><span class="pre">get_features</span></code> class method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">oids</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">oids_byfield</span><span class="p">(</span><span class="s2">&quot;PERMANENT_IDENTIFIER&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;103455178&quot;</span><span class="p">,</span> <span class="s2">&quot;103454362&quot;</span><span class="p">,</span> <span class="s2">&quot;103453218&quot;</span><span class="p">])</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">get_features</span><span class="p">(</span><span class="n">oids</span><span class="p">,</span> <span class="n">return_m</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">flowlines</span> <span class="o">=</span> <span class="n">geoutils</span><span class="o">.</span><span class="n">json2geodf</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, any valid SQL 92 WHERE clause can be used. For more details look
<a class="reference external" href="https://developers.arcgis.com/rest/services-reference/query-feature-service-.htm#ESRI_SECTION2_07DD2C5127674F6A814CE6C07D39AD46">here</a>.
For example, let’s limit our first request to only include catchments with
areas larger than 0.5 sqkm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">oids</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">oids_bygeom</span><span class="p">(</span><span class="n">basin_geom</span><span class="p">,</span> <span class="n">geo_crs</span><span class="o">=</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">,</span> <span class="n">sql_clause</span><span class="o">=</span><span class="s2">&quot;AREASQKM &gt; 0.5&quot;</span><span class="p">)</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">get_features</span><span class="p">(</span><span class="n">oids</span><span class="p">)</span>
<span class="n">catchments</span> <span class="o">=</span> <span class="n">geoutils</span><span class="o">.</span><span class="n">json2geodf</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</pre></div>
</div>
<p>A WMS-based example is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wms</span> <span class="o">=</span> <span class="n">WMS</span><span class="p">(</span>
    <span class="n">ServiceURL</span><span class="p">()</span><span class="o">.</span><span class="n">wms</span><span class="o">.</span><span class="n">fws</span><span class="p">,</span>
    <span class="n">layers</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="n">outformat</span><span class="o">=</span><span class="s2">&quot;image/tiff&quot;</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;epsg:3857&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">r_dict</span> <span class="o">=</span> <span class="n">wms</span><span class="o">.</span><span class="n">getmap_bybox</span><span class="p">(</span>
    <span class="n">basin_geom</span><span class="o">.</span><span class="n">bounds</span><span class="p">,</span>
    <span class="mf">1e3</span><span class="p">,</span>
    <span class="n">box_crs</span><span class="o">=</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">wetlands</span> <span class="o">=</span> <span class="n">geoutils</span><span class="o">.</span><span class="n">gtiff2xarray</span><span class="p">(</span><span class="n">r_dict</span><span class="p">,</span> <span class="n">basin_geom</span><span class="p">,</span> <span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Query from a WFS-based web service can be done either within a bounding box or using
any valid <a class="reference external" href="https://docs.geoserver.org/stable/en/user/tutorials/cql/cql_tutorial.html">CQL filter</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wfs</span> <span class="o">=</span> <span class="n">WFS</span><span class="p">(</span>
    <span class="n">ServiceURL</span><span class="p">()</span><span class="o">.</span><span class="n">wfs</span><span class="o">.</span><span class="n">fema</span><span class="p">,</span>
    <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;public_NFHL:Base_Flood_Elevations&quot;</span><span class="p">,</span>
    <span class="n">outformat</span><span class="o">=</span><span class="s2">&quot;esrigeojson&quot;</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;epsg:4269&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">wfs</span><span class="o">.</span><span class="n">getfeature_bybox</span><span class="p">(</span><span class="n">basin_geom</span><span class="o">.</span><span class="n">bounds</span><span class="p">,</span> <span class="n">box_crs</span><span class="o">=</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>
<span class="n">flood</span> <span class="o">=</span> <span class="n">geoutils</span><span class="o">.</span><span class="n">json2geodf</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="s2">&quot;epsg:4269&quot;</span><span class="p">,</span> <span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>

<span class="n">layer</span> <span class="o">=</span> <span class="s2">&quot;wmadata:huc08&quot;</span>
<span class="n">wfs</span> <span class="o">=</span> <span class="n">WFS</span><span class="p">(</span>
    <span class="n">ServiceURL</span><span class="p">()</span><span class="o">.</span><span class="n">wfs</span><span class="o">.</span><span class="n">waterdata</span><span class="p">,</span>
    <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span>
    <span class="n">outformat</span><span class="o">=</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;epsg:4269&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">wfs</span><span class="o">.</span><span class="n">getfeature_byfilter</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;huc8 LIKE &#39;13030%&#39;&quot;</span><span class="p">)</span>
<span class="n">huc8</span> <span class="o">=</span> <span class="n">geoutils</span><span class="o">.</span><span class="n">json2geodf</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="s2">&quot;epsg:4269&quot;</span><span class="p">,</span> <span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference external image-reference" href="https://github.com/hyriver/HyRiver-examples/blob/main/notebooks/webservices.ipynb"><img alt="https://raw.githubusercontent.com/hyriver/HyRiver-examples/main/notebooks/_static/sql_clause.png" src="https://raw.githubusercontent.com/hyriver/HyRiver-examples/main/notebooks/_static/sql_clause.png" /></a>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="async_retriever.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">AsyncRetriever: Asynchronous requests with persistent caching</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="pygeoutils.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">PyGeoUtils: Utilities for (Geo)JSON and (Geo)TIFF Conversion</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Taher Chegini<br/>
  
      &copy; Copyright 2019-2022, Taher Chegini.<br/>
    Last updated on 2022-07-30.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>