
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<meta property="og:title" content="Py3DEP: Topographic data through 3DEP" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://hyriver.readthedocs.io/en/readme/py3dep.html" />
  
<meta property="og:description" content="PyPi Conda Version CodeCov Python Versions Downloads, CodeFactor black pre-commit Binder, Features: Py3DEP is a part of HyRiver software stack that is designed to aid in hydroclimate analysis throu..." />
  
<meta property="og:image" content="https://raw.githubusercontent.com/cheginit/HyRiver/main/docs/source/_static/hydriver_logo.png" />
  
<meta property="og:image:alt" content="Py3DEP: Topographic data through 3DEP" />
  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@_taher_" />
<meta name="twitter:creator" content="@_taher_" />
<meta name="twitter:description" content="HyRiver is a suite of Python packages that provides a unified API for retrieving geospatial/temporal data from various web services." />
<meta name="twitter:image" content="https://raw.githubusercontent.com/cheginit/HyRiver/main/docs/source/_static/hydriver_logo.png" />
<meta name="twitter:image:alt" content="HyRiver is a suite of Python packages that provides a unified API for retrieving geospatial/temporal data from various web services." />
    <title>Py3DEP: Topographic data through 3DEP</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PyDaymet: Daily climate data through Daymet" href="pydaymet.html" />
    <link rel="prev" title="PyGeoHydro: Retrieve Geospatial Hydrology Data" href="pygeohydro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/hyriver_logo_text.svg" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Hydroclimate Data Retriever
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../readmes.html">
   Software Stack
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="pynhd.html">
     PyNHD: Navigate and subset NHDPlus database
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pygeohydro.html">
     PyGeoHydro: Retrieve Geospatial Hydrology Data
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Py3DEP: Topographic data through 3DEP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pydaymet.html">
     PyDaymet: Daily climate data through Daymet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="async_retriever.html">
     AsyncRetriever: Asynchronous requests with persistent caching
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pygeoogc.html">
     PyGeoOGC: Retrieve Data from RESTful, WMS, and WFS Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pygeoutils.html">
     PyGeoUtils: Utilities for (Geo)JSON and (Geo)TIFF Conversion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../examples.html">
   Example Gallery
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/3dep.html">
     Topographic Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/aridity.html">
     Aridity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/columbia.html">
     Dams in Columbia River Network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/cross_section.html">
     River Elevation and Cross-Section
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/dam_impact.html">
     Working with Geospatial Hydrologic Data Using Web Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/daymet.html">
     Climate Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/geoconnex.html">
     GeoConnex
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/hymod_calibration.html">
     Hydrological Modeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/ndvi.html">
     NDVI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nhdplus.html">
     River Network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nid.html">
     National Inventory of Dams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nid_dib.html">
     Spatiotemporal Distribution of Dams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nlcd.html">
     Land Use/Land Cover
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/noaa.html">
     Water Levels and Tides
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/nwis.html">
     River Discharge
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/pet_validation.html">
     Computing PET
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/pygeoapi.html">
     Split Catchment with PyGeoAPI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/rem.html">
     Relative Elevation Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/ssebop.html">
     Actual Evapotranspiration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/us_coasts.html">
     CONUS Coasts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/water_quality.html">
     Water Quality Portal
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/webservices.html">
     Web Services Queries
    </a>
   </li>
  </ul>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../autoapi/index.html">
   API References
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pynhd/index.html">
     PyNHD
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/core/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.core
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/network_tools/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.network_tools
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/nhdplus_derived/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.nhdplus_derived
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pynhd/pynhd/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pynhd.pynhd
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pygeohydro/index.html">
     PyGeoHydro
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/helpers/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.helpers
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/plot/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.plot
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/pygeohydro/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.pygeohydro
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/us_abbrs/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.us_abbrs
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeohydro/waterdata/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeohydro.waterdata
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/py3dep/index.html">
     Py3DEP
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/py3dep/py3dep/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         py3dep.py3dep
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/py3dep/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         py3dep.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pydaymet/index.html">
     PyDaymet
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pydaymet/core/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pydaymet.core
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pydaymet/pet/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pydaymet.pet
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pydaymet/pydaymet/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pydaymet.pydaymet
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/async_retriever/index.html">
     AsyncRetriever
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/async_retriever/async_retriever/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         async_retriever.async_retriever
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/async_retriever/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         async_retriever.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pygeoogc/index.html">
     PyGeoOGC
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoogc/core/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoogc.core
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoogc/pygeoogc/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoogc.pygeoogc
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoogc/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoogc.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../autoapi/pygeoutils/index.html">
     PyGeoUtils
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoapi/pygeoutils/pygeoutils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         pygeoutils.pygeoutils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../history.html">
   Changelogs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pynhd.html">
     PyNHD
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pygeohydro.html">
     PyGeoHydro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/py3dep.html">
     Py3DEP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pydaymet.html">
     PyDaymet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/async_retriever.html">
     AsyncRetriever
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pygeoogc.html">
     PyGeoOGC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../changelogs/pygeoutils.html">
     PyGeoUtils
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../authors.html">
   Credits
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../license.html">
   License
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/cheginit/HyRiver"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cheginit/HyRiver/issues/new?title=Issue%20on%20page%20%2Freadme/py3dep.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cheginit/HyRiver/edit/main/docs/readme/py3dep.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Py3DEP: Topographic data through 3DEP
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#citation">
   Citation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-start">
   Quick start
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Py3DEP: Topographic data through 3DEP</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Py3DEP: Topographic data through 3DEP
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#citation">
   Citation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-start">
   Quick start
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="py3dep-topographic-data-through-3dep">
<h1>Py3DEP: Topographic data through 3DEP<a class="headerlink" href="#py3dep-topographic-data-through-3dep" title="Permalink to this headline">#</a></h1>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/py3dep"><img alt="PyPi" src="https://img.shields.io/pypi/v/py3dep.svg" /></a>
<a class="reference external image-reference" href="https://anaconda.org/conda-forge/py3dep"><img alt="Conda Version" src="https://img.shields.io/conda/vn/conda-forge/py3dep.svg" /></a>
<a class="reference external image-reference" href="https://codecov.io/gh/hyriver/py3dep"><img alt="CodeCov" src="https://codecov.io/gh/hyriver/py3dep/branch/main/graph/badge.svg" /></a>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/py3dep"><img alt="Python Versions" src="https://img.shields.io/pypi/pyversions/py3dep.svg" /></a>
<a class="reference external image-reference" href="https://pepy.tech/project/py3dep"><img alt="Downloads" src="https://pepy.tech/badge/py3dep" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference external image-reference" href="https://www.codefactor.io/repository/github/hyriver/py3dep"><img alt="CodeFactor" src="https://www.codefactor.io/repository/github/hyriver/py3dep/badge" /></a>
<a class="reference external image-reference" href="https://github.com/psf/black"><img alt="black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
<a class="reference external image-reference" href="https://github.com/pre-commit/pre-commit"><img alt="pre-commit" src="https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&amp;logoColor=white" /></a>
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/hyriver/HyRiver-examples/main?urlpath=lab/tree/notebooks"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline">#</a></h1>
<p>Py3DEP is a part of <a class="reference external" href="https://github.com/hyriver/HyRiver">HyRiver</a> software stack that
is designed to aid in hydroclimate analysis through web services. This package provides
access to the <a class="reference external" href="https://www.usgs.gov/core-science-systems/ngp/3dep">3DEP</a>
database which is a part of the
<a class="reference external" href="https://viewer.nationalmap.gov/services/">National Map services</a>.
The 3DEP service has multi-resolution sources and depending on the user-provided resolution,
the data is resampled on the server-side based on all the available data sources. Py3DEP returns
the requests as <a class="reference external" href="https://xarray.pydata.org/en/stable">xarray</a> dataset. The main function is
<code class="docutils literal notranslate"><span class="pre">get_map</span></code> which supports the following layers:</p>
<ul class="simple">
<li><p>DEM</p></li>
<li><p>Hillshade Gray</p></li>
<li><p>Aspect Degrees</p></li>
<li><p>Aspect Map</p></li>
<li><p>GreyHillshade Elevation Fill</p></li>
<li><p>Hillshade Multidirectional</p></li>
<li><p>Slope Degrees</p></li>
<li><p>Slope Map</p></li>
<li><p>Hillshade Elevation Tinted</p></li>
<li><p>Height Ellipsoidal</p></li>
<li><p>Contour 25</p></li>
<li><p>Contour Smoothed 25</p></li>
</ul>
<p>Moreover, Py3DEP offers some additional utilities:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">elevation_bygrid</span></code>: For retrieving elevations of all the grid points in a 2D grid.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elevation_bycoords</span></code>: For retrieving elevation of a list of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> coordinates.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elevation_profile</span></code>: For retrieving elevation profile along a line at a given spacing.
This function converts the line to a B-spline and then calculates the elevation along
the spline at a given uniform spacing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deg2mpm</span></code>: For converting slope dataset from degree to meter per meter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query_3dep_sources</span></code>: For querying bounds of 3DEP’s data sources within a bounding box.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_3dep_availability</span></code>: For querying 3DEP’s resolution availability within a bounding box.</p></li>
</ul>
<p>You can find some example notebooks <a class="reference external" href="https://github.com/hyriver/HyRiver-examples">here</a>.</p>
<p>Moreover, under the hood, Py3DEP uses
<a class="reference external" href="https://github.com/hyriver/async_retriever">AsyncRetriever</a>
for making requests asynchronously with persistent caching. This improves the
reliability and speed of data retrieval significantly. AsyncRetriever caches all request/response
pairs and upon making an already cached request, it will retrieve the responses from the cache
if the server’s response is unchanged.</p>
<p>You can control the request/response caching behavior by setting the following
environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HYRIVER_CACHE_NAME</span></code>: Path to the caching SQLite database. It defaults to
<code class="docutils literal notranslate"><span class="pre">./cache/aiohttp_cache.sqlite</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HYRIVER_CACHE_EXPIRE</span></code>: Expiration time for cached requests in seconds. It defaults to
-1 (never expire).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HYRIVER_CACHE_DISABLE</span></code>: Disable reading/writing from/to the cache. The default is false.</p></li>
</ul>
<p>For example, in your code before making any requests you can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HYRIVER_CACHE_NAME&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;path/to/file.sqlite&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HYRIVER_CACHE_EXPIRE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;3600&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HYRIVER_CACHE_DISABLE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
</pre></div>
</div>
<p>You can also try using Py3DEP without installing
it on your system by clicking on the binder badge. A Jupyter Lab
instance with the HyRiver stack pre-installed will be launched in your web browser, and you
can start coding!</p>
<p>Please note that since this project is in the early development stages, while the provided
functionalities should be stable, changes in APIs are possible in new releases. But we
appreciate it if you give this project a try and provide feedback. Contributions are most welcome.</p>
<p>Moreover, requests for additional functionalities can be submitted via
<a class="reference external" href="https://github.com/hyriver/py3dep/issues">issue tracker</a>.</p>
</section>
<section id="citation">
<h1>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">#</a></h1>
<p>If you use any of HyRiver packages in your research, we appreciate citations:</p>
<div class="highlight-bibtex notranslate"><div class="highlight"><pre><span></span><span class="nc">@article</span><span class="p">{</span><span class="nl">Chegini_2021</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Chegini, Taher and Li, Hong-Yi and Leung, L. Ruby}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.21105/joss.03175}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">journal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Journal of Open Source Software}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">month</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{66}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{1--3}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{{HyRiver: Hydroclimate Data Retriever}}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">volume</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{6}</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2021}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h1>
<p>You can install Py3DEP using <code class="docutils literal notranslate"><span class="pre">pip</span></code> after installing <code class="docutils literal notranslate"><span class="pre">libgdal</span></code> on your system
(for example, in Ubuntu run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">libgdal-dev</span></code>). Moreover, Py3DEP has an optional
dependency for using persistent caching, <code class="docutils literal notranslate"><span class="pre">requests-cache</span></code>. We highly recommend installing
this package as it can significantly speed up send/receive queries. You don’t have to change
anything in your code, since Py3DEP under-the-hood looks for <code class="docutils literal notranslate"><span class="pre">requests-cache</span></code> and if available,
it will automatically use persistent caching:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install py3dep
</pre></div>
</div>
<p>Alternatively, Py3DEP can be installed from the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> repository
using <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda install -c conda-forge py3dep
</pre></div>
</div>
</section>
<section id="quick-start">
<h1>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">#</a></h1>
<p>You can use Py3DEP using command-line or as a Python library. The command-line interface
provides access to two functionality:</p>
<ul class="simple">
<li><p>Getting topographic data: You must create a <code class="docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code> that contains
the geometries of the target locations. This dataframe must have at least three columns:
<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">res</span></code>, and <code class="docutils literal notranslate"><span class="pre">geometry</span></code>. The <code class="docutils literal notranslate"><span class="pre">id</span></code> column is used as filenames for saving
the obtained topographic data to a NetCDF (<code class="docutils literal notranslate"><span class="pre">.nc</span></code>) file. The <code class="docutils literal notranslate"><span class="pre">res</span></code> column must be
the target resolution in meter. Then, you must save the dataframe to a file with extensions
such as <code class="docutils literal notranslate"><span class="pre">.shp</span></code> or <code class="docutils literal notranslate"><span class="pre">.gpkg</span></code> (whatever that <code class="docutils literal notranslate"><span class="pre">geopandas.read_file</span></code> can read).</p></li>
<li><p>Getting elevation: You must create a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> that contains coordinates of the
target locations. This dataframe must have at least two columns: <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>. The elevations
are obtained using <code class="docutils literal notranslate"><span class="pre">airmap</span></code> service in meters. The data are saved as a <code class="docutils literal notranslate"><span class="pre">csv</span></code> file with the
same filename as the input file with an <code class="docutils literal notranslate"><span class="pre">_elevation</span></code> appended, e.g., <code class="docutils literal notranslate"><span class="pre">coords_elevation.csv</span></code>.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>py3dep --help
<span class="go">Usage: py3dep [OPTIONS] COMMAND [ARGS]...</span>

<span class="go">Command-line interface for Py3DEP.</span>

<span class="go">Options:</span>
<span class="go">-h, --help  Show this message and exit.</span>

<span class="go">Commands:</span>
<span class="go">coords    Retrieve topographic data for a list of coordinates.</span>
<span class="go">geometry  Retrieve topographic data within geometries.</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">coords</span></code> sub-command is as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>py3dep coords -h
<span class="go">Usage: py3dep coords [OPTIONS] FPATH</span>

<span class="go">Retrieve topographic data for a list of coordinates.</span>

<span class="go">FPATH: Path to a csv file with two columns named ``lon`` and ``lat``.</span>

<span class="go">Examples:</span>
<span class="gp">    $ </span>cat coords.csv
<span class="go">    lon,lat</span>
<span class="go">    -122.2493328,37.8122894</span>
<span class="gp">    $ </span>py3dep coords coords.csv -q airmap -s topo_dir

<span class="go">Options:</span>
<span class="go">-q, --query_source [airmap|tnm|tep]</span>
<span class="go">                                Source of the elevation data.</span>
<span class="go">-s, --save_dir PATH             Path to a directory to save the requested</span>
<span class="go">                                files. Extension for the outputs is either</span>
<span class="go">                                `.nc` for geometry or `.csv` for coords.</span>

<span class="go">-h, --help                      Show this message and exit.</span>
</pre></div>
</div>
<p>And, the <code class="docutils literal notranslate"><span class="pre">geometry</span></code> sub-command is as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>py3dep geometry -h
<span class="go">Usage: py3dep geometry [OPTIONS] FPATH</span>

<span class="go">Retrieve topographic data within geometries.</span>

<span class="go">FPATH: Path to a shapefile (.shp) or geopackage (.gpkg) file.</span>
<span class="go">This file must have three columns and contain a ``crs`` attribute:</span>
<span class="go">    - ``id``: Feature identifiers that py3dep uses as the output netcdf/csv filenames.</span>
<span class="go">    - ``res``: Target resolution in meters.</span>
<span class="go">    - ``geometry``: A Polygon or MultiPloygon.</span>

<span class="go">Examples:</span>
<span class="gp">    $ </span>py3dep geometry ny_geom.gpkg -l <span class="s2">&quot;Slope Map&quot;</span> -l DEM -s topo_dir

<span class="go">Options:</span>
<span class="go">-l, --layers [DEM|Hillshade Gray|Aspect Degrees|Aspect Map|GreyHillshade_elevationFill|Hillshade Multidirectional|Slope Map|Slope Degrees|Hillshade Elevation Tinted|Height Ellipsoidal|Contour 25|Contour Smoothed 25]</span>
<span class="go">                                Target topographic data layers</span>
<span class="go">-s, --save_dir PATH             Path to a directory to save the requested</span>
<span class="go">                                files.Extension for the outputs is either</span>
<span class="go">                                `.nc` for geometry or `.csv` for coords.</span>

<span class="go">-h, --help                      Show this message and exit.</span>
</pre></div>
</div>
<p>Now, let’s see how we can use Py3DEP as a library.</p>
<p>Py3DEP accepts <a class="reference external" href="https://shapely.readthedocs.io/en/latest/manual.html">Shapely</a>’s
Polygon or a bounding box (a tuple of length four) as an input geometry.
We can use PyNHD to get a watershed’s geometry, then use it to get the DEM and slope
in meters/meters from Py3DEP using <code class="docutils literal notranslate"><span class="pre">get_map</span></code> function.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">get_map</span></code> has a <code class="docutils literal notranslate"><span class="pre">resolution</span></code> argument that sets the target resolution
in meters. Note that the highest available resolution throughout the CONUS is about 10 m,
though higher resolutions are available in limited parts of the US. Note that the input
geometry can be in any valid spatial reference (<code class="docutils literal notranslate"><span class="pre">geo_crs</span></code> argument). The <code class="docutils literal notranslate"><span class="pre">crs</span></code> argument,
however, is limited to <code class="docutils literal notranslate"><span class="pre">CRS:84</span></code>, <code class="docutils literal notranslate"><span class="pre">EPSG:4326</span></code>, and <code class="docutils literal notranslate"><span class="pre">EPSG:3857</span></code> since 3DEP only supports
these spatial references.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">py3dep</span>
<span class="kn">from</span> <span class="nn">pynhd</span> <span class="kn">import</span> <span class="n">NLDI</span>

<span class="n">geom</span> <span class="o">=</span> <span class="n">NLDI</span><span class="p">()</span><span class="o">.</span><span class="n">get_basins</span><span class="p">(</span><span class="s2">&quot;01031500&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">dem</span> <span class="o">=</span> <span class="n">py3dep</span><span class="o">.</span><span class="n">get_map</span><span class="p">(</span><span class="s2">&quot;DEM&quot;</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">geo_crs</span><span class="o">=</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;epsg:3857&quot;</span><span class="p">)</span>
<span class="n">slope</span> <span class="o">=</span> <span class="n">py3dep</span><span class="o">.</span><span class="n">get_map</span><span class="p">(</span><span class="s2">&quot;Slope Degrees&quot;</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">slope</span> <span class="o">=</span> <span class="n">py3dep</span><span class="o">.</span><span class="n">deg2mpm</span><span class="p">(</span><span class="n">slope</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference external image-reference" href="https://github.com/hyriver/HyRiver-examples/blob/main/notebooks/3dep.ipynb"><img alt="https://raw.githubusercontent.com/hyriver/HyRiver-examples/main/notebooks/_static/dem_slope.png" class="align-center" src="https://raw.githubusercontent.com/hyriver/HyRiver-examples/main/notebooks/_static/dem_slope.png" /></a>
<p>We can use <a class="reference external" href="https://github.com/corteva/rioxarray">rioxarray</a> package to save the obtained
dataset as a raster file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rioxarray</span>

<span class="n">dem</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="s2">&quot;dem_01031500.tif&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Moreover, we can get the elevations of a set of x- and y- coordinates on a grid. For example,
let’s get the minimum temperature data within this watershed from Daymet using PyDaymet then
add the elevation as a new variable to the dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pydaymet</span> <span class="k">as</span> <span class="nn">daymet</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">clm</span> <span class="o">=</span> <span class="n">daymet</span><span class="o">.</span><span class="n">get_bygeom</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;2005-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2005-01-31&quot;</span><span class="p">),</span> <span class="n">variables</span><span class="o">=</span><span class="s2">&quot;tmin&quot;</span><span class="p">)</span>
<span class="n">elev</span> <span class="o">=</span> <span class="n">py3dep</span><span class="o">.</span><span class="n">elevation_bygrid</span><span class="p">(</span><span class="n">clm</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">clm</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">clm</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span> <span class="n">clm</span><span class="o">.</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">attrs</span> <span class="o">=</span> <span class="n">clm</span><span class="o">.</span><span class="n">attrs</span>
<span class="n">clm</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">merge</span><span class="p">([</span><span class="n">clm</span><span class="p">,</span> <span class="n">elev</span><span class="p">])</span>
<span class="n">clm</span><span class="p">[</span><span class="s2">&quot;elevation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clm</span><span class="o">.</span><span class="n">elevation</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">clm</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">tmin</span><span class="p">),</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">clm</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, let’s get street network data using <a class="reference external" href="https://github.com/gboeing/osmnx">osmnx</a> package
and add elevation data for its nodes using <code class="docutils literal notranslate"><span class="pre">elevation_bycoords</span></code> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_place</span><span class="p">(</span><span class="s2">&quot;Piedmont, California, USA&quot;</span><span class="p">,</span> <span class="n">network_type</span><span class="o">=</span><span class="s2">&quot;drive&quot;</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="n">elevation</span> <span class="o">=</span> <span class="n">py3dep</span><span class="o">.</span><span class="n">elevation_bycoords</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">set_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(),</span> <span class="n">elevation</span><span class="p">)),</span> <span class="s2">&quot;elevation&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference external image-reference" href="https://github.com/hyriver/HyRiver-examples/blob/main/notebooks/3dep.ipynb"><img alt="https://raw.githubusercontent.com/hyriver/HyRiver-examples/main/notebooks/_static/street_elev.png" class="align-center" src="https://raw.githubusercontent.com/hyriver/HyRiver-examples/main/notebooks/_static/street_elev.png" /></a>
<p>We can get the elevation profile along a line at a given spacing using <code class="docutils literal notranslate"><span class="pre">elevation_profile</span></code>
function. For example, let’s get the elevation profile at 10-m spacing along the main flowline
of the upstream drainage area of a USGS station with ID <code class="docutils literal notranslate"><span class="pre">01031500</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">py3dep</span>
<span class="kn">from</span> <span class="nn">pynhd</span> <span class="kn">import</span> <span class="n">NLDI</span>

<span class="n">flw_main</span> <span class="o">=</span> <span class="n">NLDI</span><span class="p">()</span><span class="o">.</span><span class="n">navigate_byid</span><span class="p">(</span>
    <span class="n">fsource</span><span class="o">=</span><span class="s2">&quot;nwissite&quot;</span><span class="p">,</span>
    <span class="n">fid</span><span class="o">=</span><span class="s2">&quot;USGS-01031500&quot;</span><span class="p">,</span>
    <span class="n">navigation</span><span class="o">=</span><span class="s2">&quot;upstreamMain&quot;</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s2">&quot;flowlines&quot;</span><span class="p">,</span>
    <span class="n">distance</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">flw_main</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">unary_union</span>
<span class="n">elevation</span> <span class="o">=</span> <span class="n">py3dep</span><span class="o">.</span><span class="n">elevation_profile</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="pygeohydro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">PyGeoHydro: Retrieve Geospatial Hydrology Data</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="pydaymet.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">PyDaymet: Daily climate data through Daymet</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Taher Chegini<br/>
  
      &copy; Copyright 2019-2022, Taher Chegini.<br/>
    Last updated on 2022-07-30.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>